import{T as k,r as p,C as ae,J as oe,j as r,G as F,o as g,c as re,H as m,I,f as t,d as e,e as n,k as ie,p as c,l as v,D as Q,m as ue,B as de,v as se}from"./index-C_8758mc.js";function ce(u){return k({url:"/banner/banner/list",method:"get",params:u})}function pe(u){return k({url:"/banner/banner/"+u,method:"get"})}function me(u){return k({url:"/banner/banner",method:"post",data:u})}function fe(u){return k({url:"/banner/banner",method:"put",data:u})}function _e(u){return k({url:"/banner/banner/"+u,method:"delete"})}const ge={class:"app-container"},be={class:"dialog-footer"},ve=de({name:"Banner"}),we=Object.assign(ve,{setup(u){const{proxy:f}=se(),q=p([]),_=p(!1),S=p(!0),V=p(!0),B=p([]),N=p(!0),P=p(!0),D=p(0),U=p(""),j=ae({form:{},queryParams:{pageNum:1,pageSize:10,title:null},rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],image:[{required:!0,message:"封面不能为空",trigger:"blur"}],url:[{required:!0,message:"网址不能为空",trigger:"blur"}]}}),{queryParams:d,form:i,rules:K}=oe(j);function b(){S.value=!0,ce(d.value).then(o=>{q.value=o.rows,D.value=o.total,S.value=!1})}function L(){_.value=!1,R()}function R(){i.value={id:null,addTime:null,title:null,image:null,url:null},f.resetForm("bannerRef")}function $(){d.value.pageNum=1,b()}function A(){f.resetForm("queryRef"),$()}function G(o){B.value=o.map(l=>l.id),N.value=o.length!=1,P.value=!o.length}function H(){R(),_.value=!0,U.value="添加横幅"}function T(o){R();const l=o.id||B.value;pe(l).then(y=>{i.value=y.data,_.value=!0,U.value="修改横幅"})}function J(){f.$refs.bannerRef.validate(o=>{o&&(i.value.id!=null?fe(i.value).then(l=>{f.$modal.msgSuccess("修改成功"),_.value=!1,b()}):me(i.value).then(l=>{f.$modal.msgSuccess("新增成功"),_.value=!1,b()}))})}function E(o){const l=o.id||B.value;f.$modal.confirm('是否确认删除横幅编号为"'+l+'"的数据项？').then(function(){return _e(l)}).then(()=>{b(),f.$modal.msgSuccess("删除成功")}).catch(()=>{})}function O(){f.download("banner/banner/export",{...d.value},`banner_${new Date().getTime()}.xlsx`)}return b(),(o,l)=>{const y=r("el-input"),C=r("el-form-item"),s=r("el-button"),z=r("el-form"),x=r("el-col"),M=r("right-toolbar"),W=r("el-row"),h=r("el-table-column"),X=r("image-preview"),Y=r("el-table"),Z=r("pagination"),ee=r("image-upload"),ne=r("el-dialog"),w=F("hasPermi"),le=F("loading");return g(),re("div",ge,[m(e(z,{model:t(d),ref:"queryRef",inline:!0,"label-width":"68px"},{default:n(()=>[e(C,{label:"标题",prop:"title"},{default:n(()=>[e(y,{modelValue:t(d).title,"onUpdate:modelValue":l[0]||(l[0]=a=>t(d).title=a),placeholder:"请输入标题",clearable:"",onKeyup:ie($,["enter"])},null,8,["modelValue"])]),_:1}),e(C,null,{default:n(()=>[e(s,{type:"primary",icon:"Search",onClick:$},{default:n(()=>[c("搜索")]),_:1}),e(s,{icon:"Refresh",onClick:A},{default:n(()=>[c("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[I,t(V)]]),e(W,{gutter:10,class:"mb8"},{default:n(()=>[e(x,{span:1.5},{default:n(()=>[m((g(),v(s,{type:"primary",plain:"",icon:"Plus",onClick:H},{default:n(()=>[c("新增")]),_:1})),[[w,["banner:banner:add"]]])]),_:1}),e(x,{span:1.5},{default:n(()=>[m((g(),v(s,{type:"success",plain:"",icon:"Edit",disabled:t(N),onClick:T},{default:n(()=>[c("修改")]),_:1},8,["disabled"])),[[w,["banner:banner:edit"]]])]),_:1}),e(x,{span:1.5},{default:n(()=>[m((g(),v(s,{type:"danger",plain:"",icon:"Delete",disabled:t(P),onClick:E},{default:n(()=>[c("删除")]),_:1},8,["disabled"])),[[w,["banner:banner:remove"]]])]),_:1}),e(x,{span:1.5},{default:n(()=>[m((g(),v(s,{type:"warning",plain:"",icon:"Download",onClick:O},{default:n(()=>[c("导出")]),_:1})),[[w,["banner:banner:export"]]])]),_:1}),e(M,{showSearch:t(V),"onUpdate:showSearch":l[1]||(l[1]=a=>Q(V)?V.value=a:null),onQueryTable:b},null,8,["showSearch"])]),_:1}),m((g(),v(Y,{data:t(q),onSelectionChange:G},{default:n(()=>[e(h,{type:"selection",width:"55",align:"center"}),e(h,{label:"ID",align:"center",prop:"id"}),e(h,{label:"标题",align:"center",prop:"title"}),e(h,{label:"封面",align:"center",prop:"image",width:"100"},{default:n(a=>[e(X,{src:a.row.image,width:50,height:50},null,8,["src"])]),_:1}),e(h,{label:"网址",align:"center",prop:"url"}),e(h,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:n(a=>[m((g(),v(s,{link:"",type:"primary",icon:"Edit",onClick:te=>T(a.row)},{default:n(()=>[c("修改")]),_:2},1032,["onClick"])),[[w,["banner:banner:edit"]]]),m((g(),v(s,{link:"",type:"primary",icon:"Delete",onClick:te=>E(a.row)},{default:n(()=>[c("删除")]),_:2},1032,["onClick"])),[[w,["banner:banner:remove"]]])]),_:1})]),_:1},8,["data"])),[[le,t(S)]]),m(e(Z,{total:t(D),page:t(d).pageNum,"onUpdate:page":l[2]||(l[2]=a=>t(d).pageNum=a),limit:t(d).pageSize,"onUpdate:limit":l[3]||(l[3]=a=>t(d).pageSize=a),onPagination:b},null,8,["total","page","limit"]),[[I,t(D)>0]]),e(ne,{title:t(U),modelValue:t(_),"onUpdate:modelValue":l[7]||(l[7]=a=>Q(_)?_.value=a:null),width:"500px","append-to-body":""},{footer:n(()=>[ue("div",be,[e(s,{type:"primary",onClick:J},{default:n(()=>[c("确 定")]),_:1}),e(s,{onClick:L},{default:n(()=>[c("取 消")]),_:1})])]),default:n(()=>[e(z,{ref:"bannerRef",model:t(i),rules:t(K),"label-width":"80px"},{default:n(()=>[e(C,{label:"标题",prop:"title"},{default:n(()=>[e(y,{modelValue:t(i).title,"onUpdate:modelValue":l[4]||(l[4]=a=>t(i).title=a),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),e(C,{label:"封面",prop:"image"},{default:n(()=>[e(ee,{modelValue:t(i).image,"onUpdate:modelValue":l[5]||(l[5]=a=>t(i).image=a)},null,8,["modelValue"])]),_:1}),e(C,{label:"网址",prop:"url"},{default:n(()=>[e(y,{modelValue:t(i).url,"onUpdate:modelValue":l[6]||(l[6]=a=>t(i).url=a),placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{we as default};
